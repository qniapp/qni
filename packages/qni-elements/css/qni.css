@import 'tailwindcss/base';
@import 'tailwindcss/components';

@import './html';
@import './h_gate';
@import './x_gate';
@import './y_gate';
@import './z_gate';
@import './phase_gate';
@import './rnot_gate';
@import './rx_gate';
@import './ry_gate';
@import './rz_gate';
@import './swap_gate';
@import './control_gate';
@import './bloch_display';
@import './write_gate';
@import './measurement_gate';
@import './circuit_dropzone';
@import './palette_dropzone';
@import './circuit_step';
@import './quantum_circuit';
@import './circuit_editor';
@import './tippy';

@import 'tailwindcss/utilities';

@layer components {
  .operation {
    @apply inline-block;
    @apply h-8 w-8;
  }

  .operation::after {
    @apply absolute inset-0;
    @apply border-2 border-red-500 border-opacity-0;
    @apply rounded;

    content: "";
  }
}

@layer components {
  .draggable {
    touch-action: none;
  }

  palette-dropzone .draggable {
    @apply cursor-grab;
  }

  quantum-circuit:not([data-editing]) .draggable {
    @apply cursor-grab;
  }

  palette-dropzone .draggable:hover::after  {
    @apply border-opacity-100;
  }

  /* Show trash icon on top-right */
  circuit-dropzone .draggable:not([data-snapped])::part(icon)::before {
    @apply absolute -top-1/3 -right-1/3;
    @apply w-6 h-6;
    @apply z-10;

    content: "";
    background-image: url('data:image/svg+xml;utf8,<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="%23111827" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" style="fill-rule:nonzero;fill:rgb(255, 255, 255)"/></svg>');
  }

  quantum-circuit:not([data-editing]) .draggable:hover::after {
    @apply border-opacity-100;
  }

  quantum-circuit([data-editing]) .draggable:not([data-operation-x="0"]):not([data-operation-y="0"]):hover::after {
    @apply border-opacity-100;
  }

  .draggable[data-grabbed] {
    @apply border-opacity-100;
    @apply cursor-grabbing;
    @apply bg-white;
    @apply z-40;
  }

  .draggable[data-grabbed]::after {
    @apply border-opacity-100;
  }
}
